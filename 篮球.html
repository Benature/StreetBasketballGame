<!DOCTYPE html>
<html>
<head>
    <title>篮球跳跃</title>
    <meta charset="utf-8">
</head>
<body>
<canvas id="myCanvas" width="1000" height="1240" style="border:solid">
    你的浏览器不支持canvas画布元素，请更新浏览器获得演示效果。
</canvas>
<script type="text/javascript">
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");
    context.font = "20px Arial";

    //var mouseX,mouseY;
    
    var ball_x = 100,
        ball_y = 250,
        ball_r = 20;//篮球ball圆心坐标,半径
    var v_x = 2,
        v_y = 1;//球分解速度
    var g   = 1;//重力加速度
    var af  = 5;//空气阻力
    var groundy = 500;//地面y值
    var t = 0;//时间



    //点击鼠标触发弹起
    canvas.addEventListener("mousedown", function (e) {
        console.log("mousedown");
    }, false);

    var BBU = function(){
        //Ball Bounce Up
        //篮球自己弹起来
        //ball_y -=  ((v_y * t + 0.5 * g * t*t));
        ball_y -=  ((v_y * 1 ));
        v_y -= (g * 1);
        if (ball_y>=groundy){
            v_y = -v_y-1;
        }
    }



    var CBBU = function(){
        //Click then Ball Bounce Up 
        //点击后篮球弹起
        
    }


    var ball = new Image();
    ball.src = "big_face.png";
    ball.onload = function () {
        width = ball.width;
        height = ball.height;
        setInterval(function () {
            context.clearRect(0, 0, 1000, 1240);
            //数据显示
            context.fillText("Ball_y: "+ball_y,20,20);
            context.fillText("v_y: "+v_y,20,120);
            console.log("v_y: "+v_y);

            context.save();
            context.translate(ball_x, ball_y);


            BBU();
            t++;

            context.drawImage(ball, 0, 0, 290,285,0,0,100,98);
            context.restore();
        }, 1000 / 60*1);
    };












/*
    canvas.addEventListener("mousedown", function (e) {
        mouseX = e.pageX - canvas.clientLeft;
        mouseY = e.pageY - canvas.clientTop;
        console.log(mouseX + "," + mouseY);
    }, false);
    image.onload = function () {
        var x = 200, y = 220,mx=mouseX;
        setInterval(function() {
            context.clearRect(0, 0, 400, 200);
            context.save();
            context.translate(x, y);
            if ((Math.abs(x-mouseX))>=6){
                console.log("on my way!");
                x=x-5*(Math.abs(x-mouseX)/(x-mouseX));
            };
            if ( (Math.abs(y-mouseY)^2)>=6){
                console.log("on my way!");
                y=y-5*(Math.abs(y-mouseY)/(y-mouseY));
            };
            context.drawImage(image, 0, 0);
            context.restore();
        }, 1000 / 60);
    };
*/



</script>
</body>
</html>
